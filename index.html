<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EMK-DataBase</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #34495e;
            --accent-color: #3498db;
            --light-grey: #f5f5f5;
            --medium-grey: #e0e0e0;
            --dark-grey: #7f8c8d;
            --white: #ffffff;
            --text-color: #333333;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        body {
            background-color: var(--light-grey);
            color: var(--text-color);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header and Navigation */
        header {
            background-color: var(--primary-color);
            color: var(--white);
            padding: 1rem 0;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--white);
            display: flex;
            align-items: center;
        }
        
        .logo i {
            margin-right: 10px;
            color: var(--accent-color);
        }
        
        .nav-menu {
            display: flex;
            list-style: none;
        }
        
        .nav-item {
            margin-left: 2rem;
        }
        
        .nav-link {
            color: var(--white);
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 0.8rem;
            border-radius: 4px;
            transition: all 0.3s ease;
        }
        
        .nav-link:hover, .nav-link.active {
            background-color: var(--accent-color);
        }
        
        /* Main Content Area */
        main {
            min-height: calc(100vh - 140px);
            padding: 2rem 0;
        }
        
        .page {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .page.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--medium-grey);
        }
        
        .page-title {
            font-size: 1.8rem;
            color: var(--primary-color);
        }
        
        .btn {
            background-color: var(--accent-color);
            color: var(--white);
            border: none;
            padding: 0.7rem 1.5rem;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        
        .btn i {
            margin-right: 8px;
        }
        
        /* Content Cards */
        .content-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }
        
        .card {
            background-color: var(--white);
            border-radius: 8px;
            box-shadow: var(--shadow);
            padding: 1.5rem;
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.8rem;
            border-bottom: 1px solid var(--medium-grey);
        }
        
        .card-title {
            font-size: 1.3rem;
            color: var(--primary-color);
        }
        
        .card-date {
            color: var(--dark-grey);
            font-size: 0.9rem;
        }
        
        .card-details {
            color: var(--text-color);
            margin-bottom: 1rem;
        }
        
        .card-footer {
            display: flex;
            justify-content: space-between;
            margin-top: 1rem;
        }
        
        .card-actions {
            display: flex;
            gap: 10px;
        }
        
        .action-btn {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--dark-grey);
            transition: color 0.3s ease;
        }
        
        .action-btn:hover {
            color: var(--accent-color);
        }
        
        /* Modal for adding items */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1100;
            align-items: center;
            justify-content: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background-color: var(--white);
            width: 90%;
            max-width: 600px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            animation: modalFadeIn 0.3s ease;
        }
        
        @keyframes modalFadeIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--medium-grey);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-title {
            font-size: 1.5rem;
            color: var(--primary-color);
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark-grey);
        }
        
        .modal-body {
            padding: 1.5rem;
        }
        
        .form-group {
            margin-bottom: 1.2rem;
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid var(--medium-grey);
            border-radius: 4px;
            font-size: 1rem;
            transition: border 0.3s ease;
        }
        
        .form-input:focus, .form-textarea:focus, .form-select:focus {
            outline: none;
            border-color: var(--accent-color);
        }
        
        .form-textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        .modal-footer {
            padding: 1.5rem;
            border-top: 1px solid var(--medium-grey);
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        /* Footer */
        footer {
            background-color: var(--secondary-color);
            color: var(--white);
            text-align: center;
            padding: 1.5rem 0;
            margin-top: 2rem;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .nav-menu {
                margin-top: 1rem;
                flex-wrap: wrap;
            }
            
            .nav-item {
                margin-left: 0;
                margin-right: 1rem;
                margin-bottom: 0.5rem;
            }
            
            .page-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .page-header .btn {
                margin-top: 1rem;
            }
            
            .content-container {
                grid-template-columns: 1fr;
            }
        }
        
        /* Empty state */
        .empty-state {
            text-align: center;
            padding: 3rem 1rem;
            color: var(--dark-grey);
        }
        
        .empty-state i {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--medium-grey);
        }
        
        /* Status indicators */
        .status {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .status.pending {
            background-color: #fff3cd;
            color: #856404;
        }
        
        .status.confirmed {
            background-color: #d4edda;
            color: #155724;
        }
        
        .status.completed {
            background-color: #d1ecf1;
            color: #0c5460;
        }
        
        /* Sponsor level indicators */
        .sponsor-level {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
            color: white;
        }
        
        .level-platinum {
            background-color: #e5e4e2;
            color: #333;
        }
        
        .level-gold {
            background-color: #ffd700;
            color: #333;
        }
        
        .level-silver {
            background-color: #c0c0c0;
            color: #333;
        }
        
        /* Progress bar */
        .progress-bar {
            background: #eee;
            border-radius: 4px;
            margin: 10px 0;
            height: 20px;
            overflow: hidden;
        }
        
        .progress-fill {
            background: #3498db;
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        /* Priority indicators */
        .priority-high {
            color: #e74c3c;
            font-weight: 600;
        }
        
        .priority-medium {
            color: #f39c12;
            font-weight: 600;
        }
        
        .priority-low {
            color: #27ae60;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <!-- Header with Navigation -->
    <header>
        <div class="container header-container">
            <div class="logo">
                <i class="fas fa-database"></i>
                <span>EMK-DataBase</span>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#" class="nav-link active" data-page="events">Event Section</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="sponsors">Sponsor Details</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="goals">EMK Goals</a>
                </li>
            </ul>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <!-- Events Page -->
        <section id="events-page" class="page active">
            <div class="page-header">
                <h1 class="page-title">Event Section</h1>
                <button class="btn" id="add-event-btn">
                    <i class="fas fa-plus"></i> Add New Event
                </button>
            </div>
            <div class="content-container" id="events-container">
                <div class="empty-state">
                    <i class="fas fa-calendar-plus"></i>
                    <h3>No Events Yet</h3>
                    <p>Click the "Add New Event" button to create your first event</p>
                </div>
            </div>
        </section>

        <!-- Sponsors Page -->
        <section id="sponsors-page" class="page">
            <div class="page-header">
                <h1 class="page-title">Sponsor Details</h1>
                <button class="btn" id="add-sponsor-btn">
                    <i class="fas fa-plus"></i> Add New Sponsor
                </button>
            </div>
            <div class="content-container" id="sponsors-container">
                <div class="empty-state">
                    <i class="fas fa-handshake"></i>
                    <h3>No Sponsors Yet</h3>
                    <p>Click the "Add New Sponsor" button to add your first sponsor</p>
                </div>
            </div>
        </section>

        <!-- Goals Page -->
        <section id="goals-page" class="page">
            <div class="page-header">
                <h1 class="page-title">EMK Goals</h1>
                <button class="btn" id="add-goal-btn">
                    <i class="fas fa-plus"></i> Add New Goal
                </button>
            </div>
            <div class="content-container" id="goals-container">
                <div class="empty-state">
                    <i class="fas fa-bullseye"></i>
                    <h3>No Goals Yet</h3>
                    <p>Click the "Add New Goal" button to set your first goal</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Modals for adding content -->
    <!-- Add Event Modal -->
    <div id="event-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Add New Event</h2>
                <button class="close-modal">&times;</button>
            </div>
            <form id="event-form">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="event-title" class="form-label">Event Title *</label>
                        <input type="text" id="event-title" class="form-input" required placeholder="Enter event title">
                    </div>
                    <div class="form-group">
                        <label for="event-date" class="form-label">Event Date *</label>
                        <input type="date" id="event-date" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="event-location" class="form-label">Location *</label>
                        <input type="text" id="event-location" class="form-input" required placeholder="Enter event location">
                    </div>
                    <div class="form-group">
                        <label for="event-description" class="form-label">Description *</label>
                        <textarea id="event-description" class="form-textarea" required placeholder="Enter event description"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="event-status" class="form-label">Status</label>
                        <select id="event-status" class="form-select">
                            <option value="pending">Pending</option>
                            <option value="confirmed" selected>Confirmed</option>
                            <option value="completed">Completed</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn close-modal">Cancel</button>
                    <button type="submit" class="btn">Add Event</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Sponsor Modal -->
    <div id="sponsor-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Add New Sponsor</h2>
                <button class="close-modal">&times;</button>
            </div>
            <form id="sponsor-form">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="sponsor-name" class="form-label">Sponsor Name *</label>
                        <input type="text" id="sponsor-name" class="form-input" required placeholder="Enter sponsor name">
                    </div>
                    <div class="form-group">
                        <label for="sponsor-email" class="form-label">Contact Email *</label>
                        <input type="email" id="sponsor-email" class="form-input" required placeholder="Enter contact email">
                    </div>
                    <div class="form-group">
                        <label for="sponsor-phone" class="form-label">Contact Phone</label>
                        <input type="tel" id="sponsor-phone" class="form-input" placeholder="Enter contact phone number">
                    </div>
                    <div class="form-group">
                        <label for="sponsor-level" class="form-label">Sponsorship Level</label>
                        <select id="sponsor-level" class="form-select">
                            <option value="platinum">Platinum</option>
                            <option value="gold" selected>Gold</option>
                            <option value="silver">Silver</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="sponsor-notes" class="form-label">Notes</label>
                        <textarea id="sponsor-notes" class="form-textarea" placeholder="Enter any additional notes about this sponsor"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn close-modal">Cancel</button>
                    <button type="submit" class="btn">Add Sponsor</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Goal Modal -->
    <div id="goal-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Add New EMK Goal</h2>
                <button class="close-modal">&times;</button>
            </div>
            <form id="goal-form">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="goal-title" class="form-label">Goal Title *</label>
                        <input type="text" id="goal-title" class="form-input" required placeholder="Enter goal title">
                    </div>
                    <div class="form-group">
                        <label for="goal-deadline" class="form-label">Deadline *</label>
                        <input type="date" id="goal-deadline" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="goal-priority" class="form-label">Priority</label>
                        <select id="goal-priority" class="form-select">
                            <option value="high">High</option>
                            <option value="medium" selected>Medium</option>
                            <option value="low">Low</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="goal-description" class="form-label">Description *</label>
                        <textarea id="goal-description" class="form-textarea" required placeholder="Enter goal description"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="goal-progress" class="form-label">Progress (%)</label>
                        <input type="range" id="goal-progress" class="form-input" min="0" max="100" value="0">
                        <span id="progress-value">0%</span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn close-modal">Cancel</button>
                    <button type="submit" class="btn">Add Goal</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>EMK-DataBase &copy; 2023 | Manage Events, Sponsors, and Goals</p>
            <p>All data is stored locally in your browser</p>
        </div>
    </footer>

    <script>
        // Initialize empty data arrays
        let events = [];
        let sponsors = [];
        let goals = [];

        // DOM elements
        const navLinks = document.querySelectorAll('.nav-link');
        const pages = document.querySelectorAll('.page');
        const addEventBtn = document.getElementById('add-event-btn');
        const addSponsorBtn = document.getElementById('add-sponsor-btn');
        const addGoalBtn = document.getElementById('add-goal-btn');
        const eventModal = document.getElementById('event-modal');
        const sponsorModal = document.getElementById('sponsor-modal');
        const goalModal = document.getElementById('goal-modal');
        const closeModalButtons = document.querySelectorAll('.close-modal');
        const eventForm = document.getElementById('event-form');
        const sponsorForm = document.getElementById('sponsor-form');
        const goalForm = document.getElementById('goal-form');
        const eventsContainer = document.getElementById('events-container');
        const sponsorsContainer = document.getElementById('sponsors-container');
        const goalsContainer = document.getElementById('goals-container');
        const progressSlider = document.getElementById('goal-progress');
        const progressValue = document.getElementById('progress-value');

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            // Try to load data from localStorage
            loadFromLocalStorage();
            
            // Setup progress slider display
            if (progressSlider && progressValue) {
                progressSlider.addEventListener('input', function() {
                    progressValue.textContent = this.value + '%';
                });
            }
        });

        // Navigation handling
        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetPage = this.getAttribute('data-page');
                
                // Update active nav link
                navLinks.forEach(link => link.classList.remove('active'));
                this.classList.add('active');
                
                // Show target page
                pages.forEach(page => {
                    page.classList.remove('active');
                    if (page.id === `${targetPage}-page`) {
                        page.classList.add('active');
                    }
                });
            });
        });

        // Modal handling
        addEventBtn.addEventListener('click', () => openModal(eventModal));
        addSponsorBtn.addEventListener('click', () => openModal(sponsorModal));
        addGoalBtn.addEventListener('click', () => openModal(goalModal));

        closeModalButtons.forEach(button => {
            button.addEventListener('click', () => {
                closeAllModals();
            });
        });

        // Close modal when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                closeAllModals();
            }
        });

        function openModal(modal) {
            closeAllModals();
            modal.classList.add('active');
            
            // Set today's date as default for date inputs
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('event-date').value = today;
            document.getElementById('goal-deadline').value = today;
        }

        function closeAllModals() {
            document.querySelectorAll('.modal').forEach(modal => {
                modal.classList.remove('active');
            });
        }

        // Form submissions
        eventForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const newEvent = {
                id: events.length > 0 ? Math.max(...events.map(e => e.id)) + 1 : 1,
                title: document.getElementById('event-title').value,
                date: document.getElementById('event-date').value,
                location: document.getElementById('event-location').value,
                description: document.getElementById('event-description').value,
                status: document.getElementById('event-status').value
            };
            
            events.push(newEvent);
            renderEvents();
            eventForm.reset();
            closeAllModals();
            saveToLocalStorage();
            
            // Show success message
            showNotification('Event added successfully!', 'success');
        });

        sponsorForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const newSponsor = {
                id: sponsors.length > 0 ? Math.max(...sponsors.map(s => s.id)) + 1 : 1,
                name: document.getElementById('sponsor-name').value,
                email: document.getElementById('sponsor-email').value,
                phone: document.getElementById('sponsor-phone').value,
                level: document.getElementById('sponsor-level').value,
                notes: document.getElementById('sponsor-notes').value
            };
            
            sponsors.push(newSponsor);
            renderSponsors();
            sponsorForm.reset();
            closeAllModals();
            saveToLocalStorage();
            
            // Show success message
            showNotification('Sponsor added successfully!', 'success');
        });

        goalForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const newGoal = {
                id: goals.length > 0 ? Math.max(...goals.map(g => g.id)) + 1 : 1,
                title: document.getElementById('goal-title').value,
                deadline: document.getElementById('goal-deadline').value,
                priority: document.getElementById('goal-priority').value,
                description: document.getElementById('goal-description').value,
                progress: document.getElementById('goal-progress').value
            };
            
            goals.push(newGoal);
            renderGoals();
            goalForm.reset();
            closeAllModals();
            saveToLocalStorage();
            
            // Show success message
            showNotification('Goal added successfully!', 'success');
        });

        // Rendering functions
        function renderEvents() {
            if (events.length === 0) {
                eventsContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-calendar-plus"></i>
                        <h3>No Events Yet</h3>
                        <p>Click the "Add New Event" button to create your first event</p>
                    </div>
                `;
                return;
            }
            
            eventsContainer.innerHTML = events.map(event => {
                const statusClass = event.status === 'pending' ? 'pending' : 
                                   event.status === 'confirmed' ? 'confirmed' : 'completed';
                const formattedDate = new Date(event.date).toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
                
                return `
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">${event.title}</h3>
                            <span class="status ${statusClass}">${event.status}</span>
                        </div>
                        <div class="card-details">
                            <p><strong>Date:</strong> ${formattedDate}</p>
                            <p><strong>Location:</strong> ${event.location}</p>
                            <p>${event.description}</p>
                        </div>
                        <div class="card-footer">
                            <div class="card-actions">
                                <button class="action-btn edit-btn" data-id="${event.id}">
                                    <i class="fas fa-edit"></i> Edit
                                </button>
                                <button class="action-btn delete-btn" data-id="${event.id}">
                                    <i class="fas fa-trash"></i> Delete
                                </button>
                            </div>
                            <div class="card-date">
                                <i class="far fa-calendar-alt"></i> ${formattedDate}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            // Add event listeners for edit and delete buttons
            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const eventId = parseInt(this.getAttribute('data-id'));
                    editEvent(eventId);
                });
            });
            
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const eventId = parseInt(this.getAttribute('data-id'));
                    if (confirm('Are you sure you want to delete this event?')) {
                        events = events.filter(event => event.id !== eventId);
                        renderEvents();
                        saveToLocalStorage();
                        showNotification('Event deleted successfully!', 'info');
                    }
                });
            });
        }

        function renderSponsors() {
            if (sponsors.length === 0) {
                sponsorsContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-handshake"></i>
                        <h3>No Sponsors Yet</h3>
                        <p>Click the "Add New Sponsor" button to add your first sponsor</p>
                    </div>
                `;
                return;
            }
            
            sponsorsContainer.innerHTML = sponsors.map(sponsor => {
                const levelClass = `level-${sponsor.level}`;
                const levelText = sponsor.level.charAt(0).toUpperCase() + sponsor.level.slice(1);
                
                return `
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">${sponsor.name}</h3>
                            <span class="sponsor-level ${levelClass}">${levelText}</span>
                        </div>
                        <div class="card-details">
                            <p><strong>Email:</strong> ${sponsor.email}</p>
                            <p><strong>Phone:</strong> ${sponsor.phone || 'Not provided'}</p>
                            ${sponsor.notes ? `<p><strong>Notes:</strong> ${sponsor.notes}</p>` : ''}
                        </div>
                        <div class="card-footer">
                            <div class="card-actions">
                                <button class="action-btn email-btn" data-email="${sponsor.email}">
                                    <i class="fas fa-envelope"></i> Email
                                </button>
                                <button class="action-btn delete-btn" data-id="${sponsor.id}">
                                    <i class="fas fa-trash"></i> Delete
                                </button>
                            </div>
                            <div class="card-date">
                                <i class="fas fa-star"></i> ${levelText} Sponsor
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            // Add event listeners for buttons
            document.querySelectorAll('.email-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const email = this.getAttribute('data-email');
                    window.location.href = `mailto:${email}`;
                });
            });
            
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const sponsorId = parseInt(this.getAttribute('data-id'));
                    if (confirm('Are you sure you want to delete this sponsor?')) {
                        sponsors = sponsors.filter(sponsor => sponsor.id !== sponsorId);
                        renderSponsors();
                        saveToLocalStorage();
                        showNotification('Sponsor deleted successfully!', 'info');
                    }
                });
            });
        }

        function renderGoals() {
            if (goals.length === 0) {
                goalsContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-bullseye"></i>
                        <h3>No Goals Yet</h3>
                        <p>Click the "Add New Goal" button to set your first goal</p>
                    </div>
                `;
                return;
            }
            
            goalsContainer.innerHTML = goals.map(goal => {
                const formattedDate = new Date(goal.deadline).toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
                
                // Determine priority class
                let priorityClass = 'priority-medium';
                if (goal.priority === 'high') priorityClass = 'priority-high';
                if (goal.priority === 'low') priorityClass = 'priority-low';
                
                return `
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">${goal.title}</h3>
                            <div class="${priorityClass}">
                                ${goal.priority.charAt(0).toUpperCase() + goal.priority.slice(1)} Priority
                            </div>
                        </div>
                        <div class="card-details">
                            <p><strong>Deadline:</strong> ${formattedDate}</p>
                            <p><strong>Progress:</strong> ${goal.progress}%</p>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${goal.progress}%"></div>
                            </div>
                            <p>${goal.description}</p>
                        </div>
                        <div class="card-footer">
                            <div class="card-actions">
                                <button class="action-btn update-btn" data-id="${goal.id}">
                                    <i class="fas fa-sync-alt"></i> Update
                                </button>
                                <button class="action-btn delete-btn" data-id="${goal.id}">
                                    <i class="fas fa-trash"></i> Delete
                                </button>
                            </div>
                            <div class="card-date">
                                Due: ${formattedDate}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            // Add event listeners for buttons
            document.querySelectorAll('.update-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const goalId = parseInt(this.getAttribute('data-id'));
                    updateGoalProgress(goalId);
                });
            });
            
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const goalId = parseInt(this.getAttribute('data-id'));
                    if (confirm('Are you sure you want to delete this goal?')) {
                        goals = goals.filter(goal => goal.id !== goalId);
                        renderGoals();
                        saveToLocalStorage();
                        showNotification('Goal deleted successfully!', 'info');
                    }
                });
            });
        }

        // Edit event function
        function editEvent(eventId) {
            const event = events.find(e => e.id === eventId);
            if (!event) return;
            
            // Populate the form with event data
            document.getElementById('event-title').value = event.title;
            document.getElementById('event-date').value = event.date;
            document.getElementById('event-location').value = event.location;
            document.getElementById('event-description').value = event.description;
            document.getElementById('event-status').value = event.status;
            
            // Change form to update mode
            const form = document.getElementById('event-form');
            const submitBtn = form.querySelector('button[type="submit"]');
            submitBtn.textContent = 'Update Event';
            
            // Remove old submit listener
            const newForm = form.cloneNode(true);
            form.parentNode.replaceChild(newForm, form);
            
            // Add new submit listener for update
            newForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Update event
                event.title = document.getElementById('event-title').value;
                event.date = document.getElementById('event-date').value;
                event.location = document.getElementById('event-location').value;
                event.description = document.getElementById('event-description').value;
                event.status = document.getElementById('event-status').value;
                
                renderEvents();
                newForm.reset();
                closeAllModals();
                saveToLocalStorage();
                
                // Reset form to add mode
                submitBtn.textContent = 'Add Event';
                showNotification('Event updated successfully!', 'success');
            });
            
            openModal(eventModal);
        }

        // Update goal progress function
        function updateGoalProgress(goalId) {
            const goal = goals.find(g => g.id === goalId);
            if (!goal) return;
            
            const newProgress = prompt('Enter new progress percentage (0-100):', goal.progress);
            if (newProgress !== null && !isNaN(newProgress) && newProgress >= 0 && newProgress <= 100) {
                goal.progress = parseInt(newProgress);
                renderGoals();
                saveToLocalStorage();
                showNotification('Goal progress updated!', 'success');
            }
        }

        // LocalStorage functions
        function saveToLocalStorage() {
            try {
                localStorage.setItem('emk-events', JSON.stringify(events));
                localStorage.setItem('emk-sponsors', JSON.stringify(sponsors));
                localStorage.setItem('emk-goals', JSON.stringify(goals));
            } catch (e) {
                console.error('Error saving to localStorage:', e);
            }
        }

        function loadFromLocalStorage() {
            try {
                const savedEvents = localStorage.getItem('emk-events');
                const savedSponsors = localStorage.getItem('emk-sponsors');
                const savedGoals = localStorage.getItem('emk-goals');
                
                if (savedEvents) events = JSON.parse(savedEvents);
                if (savedSponsors) sponsors = JSON.parse(savedSponsors);
                if (savedGoals) goals = JSON.parse(savedGoals);
                
                renderEvents();
                renderSponsors();
                renderGoals();
            } catch (e) {
                console.error('Error loading from localStorage:', e);
            }
        }

        // Notification function
        function showNotification(message, type) {
            // Remove any existing notification
            const existingNotification = document.querySelector('.notification');
            if (existingNotification) {
                existingNotification.remove();
            }
            
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <span>${message}</span>
                <button class="notification-close">&times;</button>
            `;
            
            // Add styles for notification
            const style = document.createElement('style');
            style.textContent = `
                .notification {
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    padding: 15px 20px;
                    border-radius: 5px;
                    color: white;
                    font-weight: 600;
                    display: flex;
                    align-items: center;
                    justify-content: space-between;
                    min-width: 300px;
                    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                    z-index: 2000;
                    animation: slideIn 0.3s ease;
                }
                .notification.success { background-color: #27ae60; }
                .notification.info { background-color: #3498db; }
                .notification.warning { background-color: #f39c12; }
                .notification.error { background-color: #e74c3c; }
                .notification-close {
                    background: none;
                    border: none;
                    color: white;
                    font-size: 1.5rem;
                    cursor: pointer;
                    margin-left: 15px;
                }
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
            `;
            document.head.appendChild(style);
            
            // Add to page
            document.body.appendChild(notification);
            
            // Add close functionality
            notification.querySelector('.notification-close').addEventListener('click', () => {
                notification.remove();
            });
            
            // Auto-remove after 5 seconds
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 5000);
        }
    </script>
</body>
</html>